/********************************************************************
* Файл, в котором находится процедура мейн.                	        *
* Фактически сдесь находится только проверка класса функций         *
********************************************************************/
#include "expr.h"			// Заголовок файла описания класса функций
#include<alloc.h>

void main(void)
{
 char buffer[200];
 DefFn fn;          		// создаём экземплярчик
 cout<<"Mem status:"<<coreleft()<<endl;	// служит для проверки корректности
										// освобождения памяти после работы
 for(;;)
 {
  cout<<endl<<"Enter string:"<<endl;
  cin>>buffer;
  if(!*buffer)		// если данных нет...
   break;			// выходим из проги
  int result=fn.setup(buffer);		// инициализируем функцию и проверяем
  cout<<"Mem status:"<<coreleft()<<endl;
  cout<<fn.errorstr(result)<<endl;	// если ошибок нет - выведется ОК
  if(result==OK)				// если ошибок нет - работаем
  {
	double p[200];				// возможные параметры функции
	for(int i=0;i<fn.ParamCount();i++)	// перебираем их все и вводим
	{
		cout<<fn.ParamItem(i)<<"=";
		cin>>p[i];
	}
	cout<<fn<<endl				// выводим название функции
	<<"Value is:"<<fn(p);		// и значение.
  }
  cout<<endl<<"Stopped at: "<<fn.CurrentPtr<<endl;// позиция остановки-
											// в случае сбоя не конец строки.
 }
 cout<<"Mem status:"<<coreleft()<<endl; // служит для проверки корректности
										// освобождения памяти после работы
}